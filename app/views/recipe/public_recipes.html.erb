<div class="container">
  <div class="row">
    <div class="col-md-12">
      <h2 class="mb-3 text-center">Public Recipes</h2>

      <% if user_signed_in? %>
        <p>You are signed in. You can view the public recipes.</p>
        <ul class="list-group">
          <% @public_recipes.each do |recipe| %>
            <li class="list-group-item d-flex justify-content-between align-items-center">
              <div class="recipe">
                <h2><%= recipe.name %></h2>
                <p>By <%= recipe.user.email.split('@').first %></p>
              </div>
              <div class="text-end">
                <p>Total food items: <%= recipe.recipe_foods.length %></p>
                <p class="card-text">Total price: <%= number_to_currency(recipe.recipe_foods.joins(:food).sum('recipe_foods.quantity * foods.price')) %></p>
              </div>
            </li>
          <% end %>
        </ul>
      <% else %>
        <p>You are not signed in. You can still view the public recipes.</p>
        <ul class="list-group">
          <% @public_recipes.each do |recipe| %>
            <li class="list-group-item d-flex justify-content-between align-items-center">
              <div class="recipe">
                <h2><%= recipe.name %></h2>
                <p>By <%= recipe.user.email.split('@').first %></p>
              </div>
              <div class="text-end">
                <p>Total food items: <%= recipe.recipe_foods.length %></p>
                <p class="card-text">Total price: <%= number_to_currency(recipe.recipe_foods.joins(:food).sum('recipe_foods.quantity * foods.price')) %></p>
              </div>
            </li>
          <% end %>
        </ul>
      <% end %>
    </div>
  </div>
</div>
